{% extends "base.html" %}

{% block title %}{{ block.super }} - Managing documents{% endblock %}
{% block subtitle %}{{ block.super }} - Managing documents{% endblock %}

{% block content %}
{% if document_list_by_transition %}
  {% for transition, documents in document_list_by_transition.items %}
      <h1>Ready for {{ transition }}</h1>
      <table>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Publisher</th>
          <th>Current state</th>
          <th>Next states</th>
        </tr>

        {% for document in documents %}
          <tr>
            <td><a href="{% url manage_detail document.id %}">{{ document.title }}</a></td>
            <td>{{ document.author }}</td>
            <td>{{ document.publisher }}</td>
            <td>{{ document.state }}</td>
            <td>
      	  {% for state in document.nextValidStates %}
      	  <a href="{% url manage_done document.id %}">{{ state }}</a>, 
      	  {% endfor %}
      	</td>
          </tr>
        {% endfor %}
      </table>
  {% endfor %}
{% else %}
    <p>No documents are available.</p>
{% endif %}
{% endblock %}
