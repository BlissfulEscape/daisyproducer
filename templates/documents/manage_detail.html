{% extends "base.html" %}

{% block title %}{{ block.super }} - Manage Document Details - {{ document.title }}{% endblock %}
{% block subtitle %}{{ block.super }} - Manage Document Details{% endblock %}


{% block content %}
{% if document %}
<table>

  <tr>
    <th>Title:</th>
    <td>{{ document.title }}</td>
  </tr>
  <tr>
    <th>Author:</th>
    <td>{{ document.author }}</td>
  </tr>
  <tr>
    <th>Publisher:</th>
    <td>{{ document.publisher }}</td>
  </tr>
  <tr>
    <th>State:</th>
    <td>{{ document.state }}</td>
  </tr>
</table>

<h2>Versions</h2>
<table>
  <tr>
    <th>Comment</td>
    <th>Created at</td>
  </tr>
  {% for version in document.version_set.all %}
  <tr>
    <td>{{ version.comment }}</td>
    <td>{{ version.created_at }}</td>
  </tr>
  {% endfor %}
</table>


<h2>Upload new version</h2>
<form enctype="multipart/form-data" method="post" 
      action="/manage/{{ document.id }}/addVersion">
  <table>
  {{ versionForm.as_table }}
  </table>
  <input type="submit" value="Add Version" /> 
</form>

<h2>Attachments</h2>
<table>
  <tr>
    <th>Name</td>
    <th>Comment</td>
    <th>Mime type</td>
    <th>Created at</td>
  </tr>
  {% for attachment in document.attachment_set.all %}
  <tr>
    <td>{{ attachment.content.name }}</td>
    <td>{{ attachment.comment }}</td>
    <td>{{ attachment.mime_type }}</td>
    <td>{{ attachment.created_at }}</td>
  </tr>
  {% endfor %}
</table>


<h2>Upload new attachment</h2>
<form enctype="multipart/form-data" method="post" 
      action="/manage/{{ document.id }}/addAttachment">
  <table>
  {{ attachmentForm.as_table }}
  </table>
  <input type="submit" value="Add Attachment" /> 
</form>

<h2>State</h2>
<form method="post" action="/manage/{{ document.id }}/transition">
  <table>
  {{ documentForm.as_table }}
  </table>
  <input type="submit" value="Transition" /> 
</form>

{% else %}
    <p>No document available.</p>
{% endif %}
{% endblock %}
